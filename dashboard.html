<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8">
  <title>தமிழ் பயிற்சி திட்டம்</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: url('assets/images/dashboard.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      text-align: center;
      padding: 20px;
      margin: 0;
    }

    h1 {
      color: #cde9ff;
      font-size: 2em;
      margin-bottom: 20px;
    }

    #message {
      font-size: 1.2em;
      margin-bottom: 20px;
      background-color: rgba(0, 0, 50, 0.6);
      padding: 10px 15px;
      border-radius: 10px;
      display: inline-block;
    }

    .options {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
      gap: 15px;
    }

    .options img {
      width: 90px;
      height: 90px;
      border-radius: 12px;
      border: 3px solid #4fc3f7;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      background-color: #fff;
    }

    .button {
      background-color: #4fc3f7;
      color: #003366;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      margin-top: 10px;
    }

    .button:hover {
      background-color: #81d4fa;
    }

    @media screen and (max-width: 600px) {
      h1 {
        font-size: 1.5em;
      }

      #message {
        font-size: 1em;
        padding: 8px;
      }

      .options img {
        width: 70px;
        height: 70px;
      }
    }
  </style>
</head>
<body>
  <h1>தமிழ் தினசரி பயிற்சி</h1>
  <p id="message">காத்திருக்கவும்...</p>
  <div class="options" id="optionsContainer"></div>

  <script>
    const spellingMap = {
      "பூரி": ["ப்", "ஊ", "ரி"],
      "இட்லி": ["இ", "ட்", "லி"],
      "தோசை": ["த்", "ஓ", "சை"],
      "சப்பாத்தி": ["ச்", "அ", "ப்", "பா", "தி"],
      "பொங்கல்": ["ப்", "ஒ", "ங்", "கல்"],
      "கிச்சடி": ["க்", "இ", "ச்", "ச", "டி"],
      "சாம்பார்": ["சா", "ம்", "பா", "ர்"],
      "ரசம்": ["ர", "ச", "ம்"],
      "தயிர்": ["த", "யி", "ர்"],
      "அப்பம்": ["அ", "ப்", "பம்"],
      "டீ": ["டீ"],
      "காப்பி": ["கா", "ப்", "பி"]
    };

    const schedule = [
      { time: "08:00", task: "coffeeTea" },
      { time: "09:00", task: "breakfast" },
      { time: "10:00", task: "redirect", url: "fruits.html" },
      { time: "13:00", task: "lunch" },
      { time: "14:00", task: "redirect", url: "birds.html" },
      { time: "17:00", task: "coffeeTea" },
      { time: "19:30", task: "dinner" },
      { time: "20:30", task: "redirect", url: "numbers.html" },
      { time: "21:30", task: "goodNight" }
    ];

    function getTimeString() {
      const now = new Date();
      return now.toTimeString().slice(0, 5);
    }

    function checkSchedule() {
      const nowTime = getTimeString();
      schedule.forEach(item => {
        if (nowTime === item.time) {
          runTask(item.task, item.url);
        }
      });
    }

    function spellTamilWord(word, callback) {
      const letters = spellingMap[word] || [];
      let delay = 0;
      letters.forEach((letter, index) => {
        setTimeout(() => {
          responsiveVoice.speak(letter, "Tamil Female");
          if (index === letters.length - 1 && callback) {
            setTimeout(callback, 1000);
          }
        }, delay);
        delay += 800;
      });
    }

    function runTask(task, url = "") {
      const message = document.getElementById("message");
      const optionsContainer = document.getElementById("optionsContainer");
      optionsContainer.innerHTML = "";

      const recognizer = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognizer.lang = "ta-IN";
      recognizer.interimResults = false;

      function askAndValidate(options, questionText) {
        let delay = 0;
        responsiveVoice.speak(questionText + " விருப்பங்கள்:", "Tamil Female");
        options.forEach(option => {
          setTimeout(() => {
            responsiveVoice.speak(option, "Tamil Female");
            spellTamilWord(option);
          }, delay);
          delay += 4000;
        });

        setTimeout(() => {
          responsiveVoice.speak("தயவு செய்து உங்களுடைய பதிலை சொல்லுங்கள்", "Tamil Female");
          recognizer.start();
        }, delay + 1000);

        recognizer.onresult = function(event) {
          const userAnswer = event.results[0][0].transcript.trim();
          console.log("User said:", userAnswer);
          if (options.includes(userAnswer)) {
            responsiveVoice.speak("உங்கள் பதில் சரியானது!", "Tamil Female");
          } else {
            responsiveVoice.speak("பிழை. சரியான பதில்களில் ஒன்றை தெரிவுசெய்யவும்.", "Tamil Female");
            options.forEach(option => responsiveVoice.speak(option, "Tamil Female"));
          }
        };
      }

      switch (task) {
        case "coffeeTea":
          const drinks = ["காப்பி", "டீ"];
          message.innerText = "காலை வணக்கம்! காப்பி அல்லது டீ குடித்தீர்களா?";
          askAndValidate(drinks, "காலை வணக்கம்! காப்பி அல்லது டீ குடித்தீர்களா?");
          break;

        case "breakfast":
          const breakfast = ["இட்லி", "தோசை", "பூரி", "சப்பாத்தி", "பொங்கல்", "கிச்சடி"];
          message.innerText = "காலை உணவுக்கு என்ன சாப்பிட்டீர்கள்?";
          showImages(breakfast);
          askAndValidate(breakfast, "காலை உணவுக்கு என்ன சாப்பிட்டீர்கள்?");
          break;

        case "lunch":
          const lunch = ["சாம்பார்", "ரசம்", "தயிர்"];
          message.innerText = "மதிய உணவுக்கு என்ன சாப்பிட்டீர்கள்?";
          showImages(lunch);
          askAndValidate(lunch, "மதிய உணவுக்கு என்ன சாப்பிட்டீர்கள்?");
          break;

        case "dinner":
          const dinner = ["இட்லி", "தோசை", "சப்பாத்தி", "அப்பம்"];
          message.innerText = "இரவு உணவுக்கு என்ன சாப்பிட்டீர்கள்?";
          showImages(dinner);
          askAndValidate(dinner, "இரவு உணவுக்கு என்ன சாப்பிட்டீர்கள்?");
          break;

        case "redirect":
          message.innerText = "பக்கம் மாற்றப்படுகிறது...";
          responsiveVoice.speak("புதிய பக்கம் திறக்கப்படுகிறது", "Tamil Female");
          setTimeout(() => {
            window.location.href = url;
          }, 3000);
          break;

        case "goodNight":
          message.innerText = "இனிய இரவு வாழ்த்துகள்!";
          responsiveVoice.speak("இனிய இரவு வாழ்த்துகள்! நலமாக தூங்குங்கள்!", "Tamil Female");
          break;
      }
    }

    function showImages(options) {
      const optionsContainer = document.getElementById("optionsContainer");
      options.forEach(item => {
        const img = document.createElement("img");
        img.src = `images/${item}.png`; // Ensure these images exist
        img.alt = item;
        img.title = item;
        optionsContainer.appendChild(img);
      });
    }

    setInterval(checkSchedule, 60000); // Check every minute
    window.onload = checkSchedule;
  </script>
</body>
</html>
